module.exports = app => {
    app.server.use(require('morgan')(app.settings.logger));
    app.server.use(require('./cors'));
    app.server.set('trust proxy', () => {
        return app.settings.policies.trust;
    });

    return {
        bodyParser: require('body-parser'),
        ensureAuthenticated: require('./ensureAuthenticated')(app),
        ensureBodyFields: require('./ensureBodyFields'),
        clean: require('./clean'),
    };
};
