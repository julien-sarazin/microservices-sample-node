#!/usr/bin/env bash

MONGODB_HOST=$(dirname ${MONGODB_URI})
MONGODB_HOST=${MONGODB_HOST#mongodb://}
MONGODB_NAME=$(basename ${MONGODB_URI})

#loading fixture in the database (dev).
mongo ${MONGODB_URI} --eval "db.profiles.drop()"
mongoimport -h $MONGODB_HOST -d $MONGODB_NAME -c profiles --type json --file profiles.json

mongo ${MONGODB_URI} --eval "db.users.drop()"
mongoimport -h $MONGODB_HOST -d $MONGODB_NAME -c users --type json --file users.json

mongo ${MONGODB_URI} --eval "db.projects.drop()"
mongoimport -h $MONGODB_HOST -d $MONGODB_NAME -c projects --type json --file projects.json

mongo ${MONGODB_URI} --eval "db.concretes.drop()"
mongoimport -h $MONGODB_HOST -d $MONGODB_NAME -c concretes --type json --file concretes.json

mongo ${MONGODB_URI} --eval "db.castings.drop()"
mongoimport -h $MONGODB_HOST -d $MONGODB_NAME -c castings --type json --file castings.json
